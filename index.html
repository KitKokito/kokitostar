<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kokito Star - Personaliza tu Kit de Tatuajes Temporales</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: url('motivos/FONDO.png') center center;
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            min-height: 100vh;
            padding: 10px;
            padding-top: 70px;
            color: white;
        }

        /* BARRA DE NAVEGACI√ìN */
        .kit-navigation-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            padding: 10px 15px;
            z-index: 1000;
            border-bottom: 3px solid #E50695;
            box-shadow: 0 4px 20px rgba(229, 6, 149, 0.3);
        }

        .kit-nav-container {
            max-width: 1000px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            padding: 0 15px;
        }

        .kit-nav-btn {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            color: white;
            border: 2px solid #666;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            font-size: 0.9em;
            min-width: 80px;
            text-align: center;
        }

        .kit-nav-btn:hover {
            transform: translateY(-2px);
            border-color: #E50695;
            box-shadow: 0 8px 25px rgba(229, 6, 149, 0.4);
        }

        .kit-nav-btn.active {
            background: linear-gradient(135deg, #E50695, #ff69b4);
            border-color: #E50695;
            color: white;
        }

        .kit-nav-btn.back-btn {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            border-color: #ff6b35;
            min-width: 120px;
        }

        .kit-nav-btn.completed {
            background: linear-gradient(135deg, #28a745, #20c997);
            border-color: #28a745;
        }

        .kit-nav-btn.completed::after {
            content: ' ‚úì';
            font-size: 1.1em;
        }

        .kit-nav-btn.next-to-complete {
            animation: parpadeo 1.5s ease-in-out infinite;
            border-color: #ff6b35 !important;
            background: linear-gradient(135deg, #ff6b35, #f7931e) !important;
            color: white !important;
        }

        @keyframes parpadeo {
            0%, 100% { 
                opacity: 1; 
                transform: scale(1);
                box-shadow: 0 0 10px rgba(255, 107, 53, 0.5);
            }
            50% { 
                opacity: 0.7; 
                transform: scale(1.05);
                box-shadow: 0 0 20px rgba(255, 107, 53, 0.8);
            }
        }

        .whatsapp-btn:disabled {
            background: linear-gradient(135deg, #666, #555);
            color: #999;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .whatsapp-btn:disabled:hover {
            background: linear-gradient(135deg, #666, #555);
            transform: none;
            box-shadow: none;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(229, 6, 149, 0.3);
            overflow: hidden;
            border: 2px solid #E50695;
        }

        .logo-section {
            background: #000000;
            padding: 25px 10px;
            text-align: center;
            border-bottom: 3px solid #E50695;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-image {
            width: 100%;
            height: auto;
            max-height: 180px;
            object-fit: contain;
        }

        .header {
            background: linear-gradient(135deg, #E50695, #ff69b4);
            padding: 15px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 1.6em;
            margin-bottom: 5px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .content {
            padding: 15px;
            color: white;
        }

        /* SELECCI√ìN DE CANTIDAD */
        .kit-quantity-section {
            background: linear-gradient(135deg, #E50695, #ff69b4);
            border-radius: 12px;
            padding: 20px;
            margin: 10px 0;
            text-align: center;
            border: 3px solid #E50695;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
        }

        .quantity-btn {
            background: #000000;
            color: #E50695;
            border: 2px solid #E50695;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background: #E50695;
            color: white;
            transform: scale(1.1);
        }

        .quantity-btn:disabled {
            background: #666;
            color: #999;
            cursor: not-allowed;
        }

        .kit-quantity-display {
            background: #ffffff;
            color: #E50695;
            border: 3px solid #E50695;
            border-radius: 15px;
            padding: 10px 20px;
            font-size: 2em;
            font-weight: bold;
            min-width: 80px;
        }

        .kit-price-info {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }

        .price-breakdown {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .total-price {
            border-top: 2px solid rgba(255,255,255,0.3);
            padding-top: 10px;
            font-weight: bold;
            font-size: 1.2em;
        }

        .confirm-quantity-btn {
            background: #000000;
            color: #E50695;
            border: 3px solid #E50695;
            padding: 15px 30px;
            font-size: 1.2em;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .confirm-quantity-btn:hover {
            background: #E50695;
            color: white;
        }

        /* INFORMACI√ìN DEL KIT ACTUAL */
        .current-kit-info {
            text-align: center;
            font-size: 1.3em;
            color: #E50695;
            font-weight: bold;
            margin: 20px 0;
            padding: 15px;
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border-radius: 15px;
            border: 2px solid #E50695;
        }

        /* INSTRUCCIONES */
        .instructions {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #E50695;
        }

        .instructions h3 {
            color: #E50695;
            font-size: 1.3em;
            margin-bottom: 15px;
            text-align: center;
        }

        .step {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px;
            background: rgba(229, 6, 149, 0.1);
            border-radius: 8px;
        }

        .step-number {
            background: #E50695;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }

        /* CONTADORES */
        .counters {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #E50695, #ff69b4);
            border-radius: 15px;
            color: white;
        }

        .counter {
            text-align: center;
        }

        .counter-number {
            font-size: 2.5em;
            font-weight: bold;
            display: block;
        }

        .counter-label {
            font-size: 1.1em;
            margin-top: 5px;
        }

        .section-title {
            font-size: 1.8em;
            color: white;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #E50695;
            font-weight: bold;
        }

        /* GRID DE MOTIVOS - MEJORADO */
        .motivos-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
            justify-items: center;
            align-items: start;
        }

        .motivo-item {
            background: linear-gradient(145deg, rgba(229, 6, 149, 0.1), rgba(255, 105, 180, 0.05));
            border: 3px solid rgba(229, 6, 149, 0.3);
            border-radius: 25px;
            padding: 20px;
            transition: all 0.3s ease;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 15px;
            cursor: pointer;
            width: 100%;
            max-width: 200px;
            min-height: 220px;
        }

        .motivo-item:hover {
            transform: translateY(-8px);
            border-color: #E50695;
            box-shadow: 0 15px 30px rgba(229, 6, 149, 0.4);
        }

        .motivo-item.selected {
            border-color: #E50695;
            background: linear-gradient(145deg, rgba(229, 6, 149, 0.25), rgba(255, 105, 180, 0.15));
            box-shadow: 0 12px 25px rgba(229, 6, 149, 0.5);
        }

        .motivo-image-container {
            background: #ffffff;
            border-radius: 50%;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 120px;
            height: 120px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .motivo-image {
            width: 80px;
            height: 80px;
            object-fit: contain;
        }

        .motivo-name {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 10px;
            line-height: 1.2;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .btn-quantity {
            background: rgba(229, 6, 149, 0.2);
            color: #E50695;
            border: 2px solid rgba(229, 6, 149, 0.3);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .btn-quantity:hover {
            background: #E50695;
            color: white;
            transform: scale(1.1);
        }

        .quantity-display {
            background: rgba(229, 6, 149, 0.2);
            color: white;
            border: 2px solid rgba(229, 6, 149, 0.4);
            border-radius: 10px;
            width: 45px;
            height: 40px;
            font-size: 1.2em;
            font-weight: bold;
            text-align: center;
            outline: none;
        }

        /* MOTIVOS ESPECIALES */
        .special-motivos-section {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 2px solid #ff6b35;
        }

        .special-motivos-title {
            color: #ff6b35;
            font-size: 1.5em;
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
        }

        .special-motivos-info {
            background: rgba(255, 107, 53, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            color: #ccc;
            text-align: center;
            border-left: 4px solid #ff6b35;
        }

        .special-motivo-item {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid #ff6b35;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .special-motivo-name-input {
            flex: 1;
            padding: 12px;
            border: 2px solid #ff6b35;
            border-radius: 8px;
            background: #000;
            color: white;
            font-size: 1em;
        }

        .special-motivo-name-input::placeholder {
            color: #999;
        }

        .special-motivo-quantity-input {
            width: 80px;
            padding: 12px;
            border: 2px solid #ff6b35;
            border-radius: 8px;
            background: #000;
            color: white;
            font-size: 1em;
            text-align: center;
        }

        .btn-remove-special {
            background: #dc3545;
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-add-special {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 1.1em;
            border-radius: 10px;
            cursor: pointer;
            display: block;
            margin: 0 auto;
            font-weight: bold;
        }

        /* COLORES */
        .colores-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .color-item {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border: 2px solid #E50695;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
        }

        .color-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(229, 6, 149, 0.3);
        }

        .color-item.selected {
            background: linear-gradient(135deg, #E50695, #ff69b4);
        }

        .color-emoji {
            font-size: 2em;
            margin-bottom: 5px;
        }

        /* FORMULARIO DE ENV√çO */
        .shipping-form {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            border: 2px solid #E50695;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-label {
            margin-bottom: 8px;
            color: white;
            font-size: 1.1em;
            font-weight: bold;
        }

        .form-input {
            padding: 12px;
            border: 2px solid #E50695;
            border-radius: 8px;
            font-size: 1em;
            background: #000;
            color: white;
        }

        .form-input::placeholder {
            color: #999;
        }

        /* PAGO */
        .payment-section {
            background: linear-gradient(135deg, #E50695, #ff69b4);
            color: white;
            border-radius: 20px;
            padding: 25px;
            margin: 30px 0;
            text-align: center;
        }

        .payment-amount-display {
            background: white;
            color: #E50695;
            padding: 15px 25px;
            border-radius: 40px;
            display: inline-block;
            font-size: 2em;
            font-weight: bold;
            margin: 15px 0;
        }

        .qr-container {
            width: 160px;
            height: 160px;
            border: 3px solid white;
            border-radius: 12px;
            background: white;
            margin: 20px auto;
            overflow: hidden;
        }

        .qr-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .whatsapp-btn {
            background: linear-gradient(135deg, #25d366, #20ba5e);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 40px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 20px;
        }

        .next-kit-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.3em;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            display: block;
            margin: 20px auto;
        }

        .alert {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: bold;
        }

        .alert-success { background: #28a745; color: white; }
        .alert-warning { background: #ff8c00; color: white; }
        .alert-danger { background: #dc3545; color: white; }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .colores-grid { grid-template-columns: repeat(2, 1fr); }
            .form-row { grid-template-columns: 1fr; }
            .counters { flex-direction: column; gap: 15px; }
            .special-motivo-item { flex-direction: column; gap: 10px; }
            
            .motivos-grid { 
                grid-template-columns: repeat(3, 1fr); 
                gap: 12px; 
            }
            
            .motivo-item {
                max-width: none;
                min-height: 180px;
                padding: 15px;
            }
            
            .motivo-image-container {
                width: 90px;
                height: 90px;
                padding: 12px;
            }
            
            .motivo-image {
                width: 66px;
                height: 66px;
            }
            
            .motivo-name {
                font-size: 0.95em;
                margin-bottom: 8px;
            }
            
            .btn-quantity {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
            
            .quantity-display {
                width: 38px;
                height: 35px;
                font-size: 1.1em;
            }
        }

        @media (max-width: 480px) {
            /* MANTENER 3 COLUMNAS TAMBI√âN EN M√ìVILES */
            .motivos-grid { 
                grid-template-columns: repeat(3, 1fr); 
                gap: 8px;
            }
            
            /* MANTENER LOS CONTROLES HORIZONTALES EN M√ìVIL */
            .quantity-selector {
                display: flex;
                flex-direction: row;
                align-items: center;
                justify-content: center;
                gap: 15px;
            }
            
            .motivo-item {
                min-height: 160px;
                padding: 10px;
            }
            
            .motivo-image-container {
                width: 70px;
                height: 70px;
                padding: 8px;
            }
            
            .motivo-image {
                width: 54px;
                height: 54px;
            }
            
            .motivo-name {
                font-size: 0.85em;
                margin-bottom: 6px;
            }
            
            .btn-quantity {
                width: 30px;
                height: 30px;
                font-size: 14px;
            }
            
            .quantity-display {
                width: 32px;
                height: 30px;
                font-size: 1em;
            }
            
            .quantity-controls {
                gap: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="kit-navigation-bar" id="kitNavigationBar" style="display: none;">
        <div class="kit-nav-container" id="kitNavContainer"></div>
    </div>

    <div class="container">
        <div class="logo-section">
            <img src="motivos/LOGO_KOKITO.png" alt="Kokito Star Logo" class="logo-image">
        </div>

        <div class="header">
            <h1>‚ú® Personaliza tu Kit ‚ú®</h1>
            <p>Crea tu kit perfecto de tatuajes temporales con glitter</p>
        </div>

        <div class="content">
            <!-- SELECCI√ìN DE CANTIDAD -->
            <div class="kit-quantity-section" id="kitQuantitySection">
                <h2>üéØ ¬øCu√°ntos kits quieres?</h2>
                <p>Selecciona la cantidad de kits que deseas personalizar</p>
                
                <div class="quantity-selector">
                    <button class="quantity-btn" id="decreaseKitsBtn">‚àí</button>
                    <div class="kit-quantity-display" id="kitQuantityDisplay">1</div>
                    <button class="quantity-btn" id="increaseKitsBtn">+</button>
                </div>

                <div class="kit-price-info">
                    <div class="price-breakdown">
                        <span id="kitsLabel">1 Kit:</span>
                        <span id="kitsPrice">$145.000</span>
                    </div>
                    <div class="price-breakdown">
                        <span>Domicilio:</span>
                        <span>$10.000</span>
                    </div>
                    <div class="price-breakdown total-price">
                        <span>Total:</span>
                        <span id="totalPrice">$155.000</span>
                    </div>
                </div>

                <button class="confirm-quantity-btn" id="confirmQuantityBtn">
                    ‚úÖ Confirmar y Personalizar Kits
                </button>
            </div>

            <!-- INFORMACI√ìN DEL KIT ACTUAL -->
            <div class="current-kit-info" id="currentKitInfo" style="display: none;">
                Personalizando Kit 1 de 1
            </div>

            <!-- INSTRUCCIONES -->
            <div class="instructions" id="instructionsSection" style="display: none;">
                <h3>üìã ¬øC√≥mo funciona?</h3>
                <div class="step">
                    <div class="step-number">1</div>
                    <div>Selecciona la cantidad de kits que quieres</div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div>Elige 30 motivos para cada kit (regulares + especiales)</div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div>Selecciona 6 colores de glitter por kit</div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div>Completa tu informaci√≥n de env√≠o</div>
                </div>
                <div class="step">
                    <div class="step-number">5</div>
                    <div>Revisa tu pedido y realiza el pago</div>
                </div>
                <div class="step">
                    <div class="step-number">6</div>
                    <div>Env√≠a tu pedido por WhatsApp</div>
                </div>
            </div>

            <!-- CONTADORES -->
            <div class="counters" id="countersSection" style="display: none;">
                <div class="counter">
                    <span class="counter-number" id="totalMotivos">0</span>
                    <span class="counter-label">Motivos / 30</span>
                </div>
                <div class="counter">
                    <span class="counter-number" id="totalColores">0</span>
                    <span class="counter-label">Colores / 6</span>
                </div>
            </div>

            <div id="alerts"></div>

            <!-- SECCI√ìN DE MOTIVOS -->
            <div class="section" id="motivosSection" style="display: none;">
                <h2 class="section-title">üé® Motivos para <span id="motivosSectionTitle">Kit 1</span></h2>
                <div class="motivos-grid" id="motivosGrid"></div>
                
                <!-- MOTIVOS ESPECIALES -->
                <div class="special-motivos-section">
                    <h3 class="special-motivos-title">‚≠ê Motivos Especiales ‚≠ê</h3>
                    <div class="special-motivos-info">
                        üí° Agrega motivos especiales como Kuromi, My Melody, Stitch, Labubu, etc.
                    </div>
                    <div id="specialMotivosContainer"></div>
                    <button class="btn-add-special" onclick="agregarMotivoEspecial()">
                        ‚ûï Agregar Motivo Especial
                    </button>
                </div>
                
                <button class="next-kit-btn" id="nextKitBtn" style="display: none;">
                    ‚û°Ô∏è Continuar
                </button>
            </div>

            <!-- SECCI√ìN DE COLORES -->
            <div class="section" id="coloresSection" style="display: none;">
                <h2 class="section-title">üåà Colores para <span id="coloresSectionTitle">Kit 1</span></h2>
                <div class="colores-grid" id="coloresGrid"></div>
            </div>

            <!-- SECCI√ìN DE ENV√çO -->
            <div class="section" id="shippingSection" style="display: none;">
                <h2 class="section-title">üì¶ Informaci√≥n de Env√≠o</h2>
                <div class="shipping-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">ü§© Nombre completo</label>
                            <input type="text" class="form-input" id="nombreCompleto" placeholder="Tu nombre completo" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">‚òéÔ∏è Tel√©fono</label>
                            <input type="tel" class="form-input" id="telefono" placeholder="3001234567" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group full-width">
                            <label class="form-label">üì™ Direcci√≥n completa</label>
                            <input type="text" class="form-input" id="direccion" placeholder="Calle 123 #45-67, Barrio Centro" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">üè¢ Unidad/Edificio (opcional)</label>
                            <input type="text" class="form-input" id="unidad" placeholder="Torre A, Apto 501">
                        </div>
                        <div class="form-group">
                            <label class="form-label">üåá Ciudad</label>
                            <input type="text" class="form-input" id="ciudad" placeholder="Medell√≠n" required>
                        </div>
                    </div>
                </div>

                <div id="orderSummary"></div>
            </div>

            <!-- SECCI√ìN DE PAGO -->
            <div class="payment-section" id="paymentSection" style="display: none;">
                <h3>üí≥ Informaci√≥n de Pago</h3>
                
                <div class="payment-amount-display" id="paymentAmount">üí∞ $155.000</div>
                
                <p>(Domicilio incluido en toda Colombia)</p>
                
                <div style="background: rgba(0,0,0,0.3); border-radius: 12px; padding: 15px; margin: 20px 0;">
                    üìç Realiza tu pago a Bancolombia:<br>
                    üí∞ Ahorros: 019-512646-91<br>
                    üë§ Olga Luc√≠a Arango
                </div>
                
                <div class="qr-container">
                    <img src="motivos/QR_KITS.png" alt="QR de Pago" class="qr-image">
                </div>

                <button class="whatsapp-btn" id="whatsappButton" onclick="enviarWhatsApp()" disabled>
                    ‚è≥ Completa tu personalizaci√≥n de kits
                </button>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let totalKits = 1;
        let currentKit = 1;
        let kitsData = {};
        const MAX_MOTIVOS = 30;
        const MAX_COLORES = 6;
        const KIT_PRICE = 145000;
        const SHIPPING_PRICE = 10000;

        const motivos = [
            '√Åguila', 'Ara√±a', 'Arco√≠ris', 'Barbie', 'Batman', 'Beso', 
            'Caballo', 'Carita feliz', 'Coraz√≥n Karol G', 'Delf√≠n', 
            'Dinosaurio', 'Drag√≥n', 'Elefante', 'Flash', 'Gato', 
            'Hongo', 'Huella', 'Le√≥n', 'Mario', 'Mariposa', 
            'Medell√≠n', 'Nacional', 'Notas musicales', 'Pirata', 
            'Planeta', 'Pluma', 'Pony', 'Sirenita', 'Sonic', 'Unicornio'
        ];

        const colores = [
            {name: 'Azul oscuro', emoji: 'üíô'},
            {name: 'Azul claro', emoji: 'ü©µ'},
            {name: 'Dorado', emoji: 'üíõ'},
            {name: 'Rojo', emoji: '‚ù§Ô∏è'},
            {name: 'Verde', emoji: 'üíö'},
            {name: 'Fucsia', emoji: 'ü©∑'},
            {name: 'Morado', emoji: 'üíú'},
            {name: 'Rosado', emoji: 'üíó'},
            {name: 'Caf√©', emoji: 'ü§é'},
            {name: 'Negro', emoji: 'üñ§'},
            {name: 'Multicolor', emoji: 'üåà'}
        ];

        const motivoImages = {
            '√Åguila': 'motivos/K_Aguila.png',
            'Ara√±a': 'motivos/K_Arana.png',
            'Arco√≠ris': 'motivos/K_Arcoiris.png',
            'Barbie': 'motivos/K_Barbie.png',
            'Batman': 'motivos/K_Batman.png',
            'Beso': 'motivos/K_Beso.png',
            'Caballo': 'motivos/K_Caballo.png',
            'Carita feliz': 'motivos/K_Carita_Feliz.png',
            'Coraz√≥n Karol G': 'motivos/K_Crazon_CG.png',
            'Delf√≠n': 'motivos/K_Delfin.png',
            'Dinosaurio': 'motivos/K_Dinosaurio.png',
            'Drag√≥n': 'motivos/K_Dragon.png',
            'Elefante': 'motivos/K_Elefante.png',
            'Flash': 'motivos/K_Flash.png',
            'Gato': 'motivos/K_Gato.png',
            'Hongo': 'motivos/K_Hongo.png',
            'Huella': 'motivos/K_Huella.png',
            'Le√≥n': 'motivos/K_Leon.png',
            'Mario': 'motivos/K_Mario.png',
            'Mariposa': 'motivos/K_Mariposa.png',
            'Medell√≠n': 'motivos/K_Medellin.png',
            'Nacional': 'motivos/K_Nacional.png',
            'Notas musicales': 'motivos/K_Notas.png',
            'Pirata': 'motivos/K_Calavera.png',
            'Planeta': 'motivos/K_Paneta.png',
            'Pluma': 'motivos/K_Pluma.png',
            'Pony': 'motivos/K_Pony.png',
            'Sirenita': 'motivos/K_Sirena.png',
            'Sonic': 'motivos/K_Sonic.png',
            'Unicornio': 'motivos/K_Unicornio.png'
        };

        // FUNCIONES PRINCIPALES
        function initializeApp() {
            updateKitQuantityDisplay();
            updatePriceDisplay();
        }

        function changeKitQuantity(change) {
            const newQuantity = totalKits + change;
            if (newQuantity >= 1 && newQuantity <= 10) {
                totalKits = newQuantity;
                updateKitQuantityDisplay();
                updatePriceDisplay();
            }
        }

        function updateKitQuantityDisplay() {
            document.getElementById('kitQuantityDisplay').textContent = totalKits;
            document.getElementById('decreaseKitsBtn').disabled = totalKits <= 1;
            document.getElementById('increaseKitsBtn').disabled = totalKits >= 10;
        }

        function updatePriceDisplay() {
            const kitsTotal = totalKits * KIT_PRICE;
            const total = kitsTotal + SHIPPING_PRICE;
            
            document.getElementById('kitsLabel').textContent = `${totalKits} Kit${totalKits > 1 ? 's' : ''}:`;
            document.getElementById('kitsPrice').textContent = `${kitsTotal.toLocaleString()}`;
            document.getElementById('totalPrice').textContent = `${total.toLocaleString()}`;
        }

        function confirmKitQuantity() {
            // Inicializar datos para cada kit
            kitsData = {};
            for (let i = 1; i <= totalKits; i++) {
                kitsData[i] = {
                    motivos: {},
                    motivosEspeciales: [],
                    colores: []
                };
                motivos.forEach(motivo => {
                    kitsData[i].motivos[motivo] = 0;
                });
            }

            // Mostrar secciones
            document.getElementById('kitQuantitySection').style.display = 'none';
            document.getElementById('kitNavigationBar').style.display = 'block';
            document.getElementById('currentKitInfo').style.display = 'block';
            document.getElementById('instructionsSection').style.display = 'block';
            document.getElementById('countersSection').style.display = 'block';
            document.getElementById('motivosSection').style.display = 'block';

            // Configurar navegaci√≥n
            createKitNavigation();
            currentKit = 1;
            updateCurrentKitDisplay();
            createMotivosGrid();
            renderMotivosEspeciales();
            createColoresGrid();
            updateCounters();

            // NAVEGACI√ìN AUTOMATIZADA: Scroll a instrucciones
            setTimeout(() => {
                document.getElementById('instructionsSection').scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
                showAlert('üëÜ Lee las instrucciones y luego personaliza tu primer kit', 'success');
            }, 500);
        }

        function createKitNavigation() {
            const navContainer = document.getElementById('kitNavContainer');
            navContainer.innerHTML = '';

            // Bot√≥n de regreso
            const backBtn = document.createElement('div');
            backBtn.className = 'kit-nav-btn back-btn';
            backBtn.innerHTML = 'üîô Cambiar Cantidad';
            backBtn.onclick = () => location.reload();
            navContainer.appendChild(backBtn);

            // Separador
            const separator = document.createElement('div');
            separator.style.cssText = 'width: 2px; height: 30px; background: #E50695; margin: 0 10px;';
            navContainer.appendChild(separator);

            // Botones de kits
            for (let i = 1; i <= totalKits; i++) {
                const navBtn = document.createElement('div');
                navBtn.className = `kit-nav-btn ${i === currentKit ? 'active' : ''}`;
                navBtn.textContent = `Kit ${i}`;
                navBtn.onclick = () => switchToKit(i);
                navContainer.appendChild(navBtn);
            }
        }

        function switchToKit(kitNumber) {
            if (kitNumber === currentKit) return;

            saveCurrentKitState();
            currentKit = kitNumber;
            updateCurrentKitDisplay();
            loadKitState();
            updateNavigation();
        }

        function updateNavigation() {
            document.querySelectorAll('.kit-nav-btn').forEach(btn => {
                if (!btn.classList.contains('back-btn')) {
                    btn.classList.remove('active');
                    if (btn.textContent === `Kit ${currentKit}`) {
                        btn.classList.add('active');
                    }
                }
            });
        }

        function updateCurrentKitDisplay() {
            document.getElementById('currentKitInfo').textContent = `Personalizando Kit ${currentKit} de ${totalKits}`;
            document.getElementById('motivosSectionTitle').textContent = `Kit ${currentKit}`;
            document.getElementById('coloresSectionTitle').textContent = `Kit ${currentKit}`;
        }

        function saveCurrentKitState() {
            // Guardar motivos regulares
            motivos.forEach(motivo => {
                const input = document.getElementById(`qty-input-${motivo}`);
                if (input) {
                    kitsData[currentKit].motivos[motivo] = parseInt(input.value) || 0;
                }
            });

            // Guardar colores
            kitsData[currentKit].colores = [];
            document.querySelectorAll('.color-item.selected').forEach(item => {
                const colorIndex = parseInt(item.id.replace('color-', ''));
                kitsData[currentKit].colores.push(colorIndex);
            });
        }

        function loadKitState() {
            const kitData = kitsData[currentKit];

            // Cargar motivos regulares
            motivos.forEach(motivo => {
                const input = document.getElementById(`qty-input-${motivo}`);
                const item = input.closest('.motivo-item');
                const quantity = kitData.motivos[motivo] || 0;
                
                input.value = quantity;
                if (quantity > 0) {
                    item.classList.add('selected');
                } else {
                    item.classList.remove('selected');
                }
            });

            // Cargar motivos especiales
            renderMotivosEspeciales();

            // Cargar colores
            document.querySelectorAll('.color-item').forEach(item => {
                item.classList.remove('selected');
            });
            kitData.colores.forEach(colorIndex => {
                const colorItem = document.getElementById(`color-${colorIndex}`);
                if (colorItem) {
                    colorItem.classList.add('selected');
                }
            });

            updateCounters();
            updateNextKitButton();
        }

        // MOTIVOS ESPECIALES
        function agregarMotivoEspecial() {
            const id = Date.now();
            const motivoData = { id: id, nombre: '', cantidad: 1 };
            kitsData[currentKit].motivosEspeciales.push(motivoData);
            renderMotivosEspeciales();
            updateCounters();
        }

        function eliminarMotivoEspecial(id) {
            kitsData[currentKit].motivosEspeciales = kitsData[currentKit].motivosEspeciales.filter(m => m.id !== id);
            renderMotivosEspeciales();
            updateCounters();
        }

        function actualizarMotivoEspecial(id, campo, valor) {
            const motivo = kitsData[currentKit].motivosEspeciales.find(m => m.id === id);
            if (motivo) {
                if (campo === 'cantidad') {
                    valor = Math.max(1, parseInt(valor) || 1);
                    const currentTotal = getTotalMotivos() - motivo.cantidad;
                    const maxAllowed = Math.min(valor, MAX_MOTIVOS - currentTotal);
                    
                    if (valor > maxAllowed) {
                        valor = maxAllowed;
                        showAlert(`‚ö†Ô∏è No puedes exceder ${MAX_MOTIVOS} motivos en total`, 'warning');
                        // Actualizar el input con el valor permitido
                        setTimeout(() => {
                            const input = document.querySelector(`input[oninput*="${id}"][oninput*="cantidad"]`);
                            if (input) input.value = valor;
                        }, 0);
                    }
                }
                motivo[campo] = valor;
                updateCounters();
                updateNextKitButton();
                checkMotivosCompletos();
                clearAlerts();
            }
        }

        function renderMotivosEspeciales() {
            const container = document.getElementById('specialMotivosContainer');
            container.innerHTML = '';
            
            if (!kitsData[currentKit] || !kitsData[currentKit].motivosEspeciales) {
                return;
            }
            
            kitsData[currentKit].motivosEspeciales.forEach(motivo => {
                const item = document.createElement('div');
                item.className = 'special-motivo-item';
                item.innerHTML = `
                    <input type="text" 
                           class="special-motivo-name-input" 
                           placeholder="Ej: Kuromi, My Melody, Stitch..." 
                           value="${motivo.nombre}"
                           oninput="actualizarMotivoEspecial(${motivo.id}, 'nombre', this.value)">
                    <input type="number" 
                           class="special-motivo-quantity-input" 
                           min="1" max="30" 
                           value="${motivo.cantidad}"
                           oninput="actualizarMotivoEspecial(${motivo.id}, 'cantidad', this.value)">
                    <button class="btn-remove-special" onclick="eliminarMotivoEspecial(${motivo.id})">‚úï</button>
                `;
                container.appendChild(item);
            });
        }

        // MOTIVOS REGULARES
        function createMotivosGrid() {
            const grid = document.getElementById('motivosGrid');
            grid.innerHTML = '';
            
            motivos.forEach(motivo => {
                const item = document.createElement('div');
                item.className = 'motivo-item';
                
                item.innerHTML = `
                    <div class="motivo-image-container" onclick="increaseQuantity('${motivo}')">
                        <img src="${motivoImages[motivo]}" alt="${motivo}" class="motivo-image" onerror="this.style.display='none'">
                    </div>
                    <div class="motivo-name">${motivo}</div>
                    <div class="quantity-controls">
                        <button class="btn-quantity" onclick="decreaseQuantity('${motivo}')">‚àí</button>
                        <input type="number" class="quantity-display" id="qty-input-${motivo}" 
                               value="0" min="0" max="30" 
                               onchange="updateQuantityFromInput('${motivo}')">
                        <button class="btn-quantity" onclick="increaseQuantity('${motivo}')">+</button>
                    </div>
                `;
                grid.appendChild(item);
            });
        }

        function increaseQuantity(motivo) {
            if (getTotalMotivos() < MAX_MOTIVOS) {
                kitsData[currentKit].motivos[motivo]++;
                updateMotivoDisplay(motivo);
                updateCounters();
                checkMotivosCompletos();
                clearAlerts();
            } else {
                showAlert('‚ö†Ô∏è Has alcanzado el l√≠mite de 30 motivos en total (regulares + especiales)', 'warning');
            }
        }

        function decreaseQuantity(motivo) {
            if (kitsData[currentKit].motivos[motivo] > 0) {
                kitsData[currentKit].motivos[motivo]--;
                updateMotivoDisplay(motivo);
                updateCounters();
                clearAlerts();
            }
        }

        function updateQuantityFromInput(motivo) {
            let newValue = parseInt(document.getElementById(`qty-input-${motivo}`).value) || 0;
            
            if (newValue < 0) newValue = 0;
            if (newValue > 30) newValue = 30;
            
            const currentTotal = getTotalMotivos() - kitsData[currentKit].motivos[motivo];
            const maxAllowed = Math.min(newValue, MAX_MOTIVOS - currentTotal);
            
            if (newValue > maxAllowed) {
                newValue = maxAllowed;
                showAlert(`‚ö†Ô∏è No puedes exceder ${MAX_MOTIVOS} motivos en total (regulares + especiales)`, 'warning');
            }
            
            kitsData[currentKit].motivos[motivo] = newValue;
            updateMotivoDisplay(motivo);
            updateCounters();
            checkMotivosCompletos();
            clearAlerts();
        }

        function clearAlerts() {
            setTimeout(() => {
                document.getElementById('alerts').innerHTML = '';
            }, 3000);
        }

        function updateMotivoDisplay(motivo) {
            const input = document.getElementById(`qty-input-${motivo}`);
            const item = input.closest('.motivo-item');
            
            input.value = kitsData[currentKit].motivos[motivo];
            
            if (kitsData[currentKit].motivos[motivo] > 0) {
                item.classList.add('selected');
            } else {
                item.classList.remove('selected');
            }
        }

        function checkMotivosCompletos() {
            if (getTotalMotivos() === MAX_MOTIVOS) {
                document.getElementById('coloresSection').style.display = 'block';
                
                // NAVEGACI√ìN AUTOMATIZADA: Scroll a colores
                setTimeout(() => {
                    document.getElementById('coloresSection').scrollIntoView({ 
                        behavior: 'smooth',
                        block: 'start'
                    });
                    showAlert('‚úÖ ¬°30 motivos completados! Ahora elige 6 colores para este kit', 'success');
                }, 500);
            }
            updateNextKitButton();
        }

        // COLORES
        function createColoresGrid() {
            const grid = document.getElementById('coloresGrid');
            grid.innerHTML = '';
            
            colores.forEach((color, index) => {
                const item = document.createElement('div');
                item.className = 'color-item';
                item.id = `color-${index}`;
                item.innerHTML = `
                    <div class="color-emoji">${color.emoji}</div>
                    <div>${color.name}</div>
                `;
                item.onclick = () => toggleColor(index);
                grid.appendChild(item);
            });
        }

        function toggleColor(index) {
            const colorItem = document.getElementById(`color-${index}`);
            const colorIndex = kitsData[currentKit].colores.indexOf(index);
            
            if (colorIndex === -1) {
                if (kitsData[currentKit].colores.length < MAX_COLORES) {
                    kitsData[currentKit].colores.push(index);
                    colorItem.classList.add('selected');
                    updateCounters();
                    updateNextKitButton();
                } else {
                    showAlert('‚ö†Ô∏è M√°ximo 6 colores por kit', 'warning');
                }
            } else {
                kitsData[currentKit].colores.splice(colorIndex, 1);
                colorItem.classList.remove('selected');
                updateCounters();
                updateNextKitButton();
            }
        }

        // NAVEGACI√ìN ENTRE KITS
        function updateNextKitButton() {
            const nextBtn = document.getElementById('nextKitBtn');
            const totalMotivos = getTotalMotivos();
            const hasColores = kitsData[currentKit].colores.length === MAX_COLORES;
            
            if (totalMotivos === MAX_MOTIVOS && hasColores) {
                nextBtn.style.display = 'block';
                if (currentKit < totalKits) {
                    nextBtn.textContent = `‚û°Ô∏è Continuar al Kit ${currentKit + 1}`;
                } else {
                    nextBtn.textContent = '‚úÖ Finalizar Personalizaci√≥n';
                }
            } else {
                nextBtn.style.display = 'none';
            }
        }

        function goToNextKit() {
            saveCurrentKitState();
            
            // Marcar como completado el kit actual
            const currentNavBtn = document.querySelectorAll('.kit-nav-btn')[currentKit + 1]; // +1 por el bot√≥n back
            if (currentNavBtn) {
                currentNavBtn.classList.add('completed');
                currentNavBtn.classList.remove('next-to-complete');
            }

            if (currentKit < totalKits) {
                // Ir al siguiente kit
                currentKit++;
                updateCurrentKitDisplay();
                loadKitState();
                updateNavigation();
                
                // NAVEGACI√ìN AUTOMATIZADA: Hacer parpadear el siguiente kit si existe
                if (currentKit < totalKits) {
                    const nextNavBtn = document.querySelectorAll('.kit-nav-btn')[currentKit + 2]; // +2 por el bot√≥n back y el kit actual
                    if (nextNavBtn) {
                        nextNavBtn.classList.add('next-to-complete');
                    }
                }
                
                // Scroll a contadores del nuevo kit
                setTimeout(() => {
                    document.getElementById('countersSection').scrollIntoView({ 
                        behavior: 'smooth',
                        block: 'start'
                    });
                    showAlert(`‚úÖ Kit ${currentKit - 1} completado! Personaliza el Kit ${currentKit}`, 'success');
                }, 300);
                
            } else {
                // Todos los kits completados
                showShippingSection();
            }
        }

        function showShippingSection() {
            // Ocultar secciones de personalizaci√≥n
            document.getElementById('kitNavigationBar').style.display = 'none';
            document.getElementById('currentKitInfo').style.display = 'none';
            document.getElementById('countersSection').style.display = 'none';
            document.getElementById('motivosSection').style.display = 'none';
            document.getElementById('coloresSection').style.display = 'none';
            
            // Mostrar secci√≥n de env√≠o y pago
            document.getElementById('shippingSection').style.display = 'block';
            document.getElementById('paymentSection').style.display = 'block';

            updateOrderSummary();
            updatePaymentAmount();
            
            // NAVEGACI√ìN AUTOMATIZADA: Scroll al resumen y luego al pago
            setTimeout(() => {
                document.getElementById('shippingSection').scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
                showAlert('üéâ ¬°Todos los kits personalizados! Revisa tu resumen y completa tus datos', 'success');
            }, 500);
            
            // Despu√©s de 3 segundos, scroll autom√°tico al pago
            setTimeout(() => {
                document.getElementById('paymentSection').scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
                showAlert('üí≥ Completa tus datos de env√≠o para habilitar el bot√≥n de WhatsApp', 'success');
            }, 4000);
        }

        // UTILIDADES
        function getTotalMotivos() {
            const regularMotivos = Object.values(kitsData[currentKit].motivos).reduce((sum, qty) => sum + qty, 0);
            const specialMotivos = kitsData[currentKit].motivosEspeciales.reduce((sum, motivo) => sum + (motivo.cantidad || 0), 0);
            return regularMotivos + specialMotivos;
        }

        function getTotalMotivosForKit(kitNumber) {
            const regularMotivos = Object.values(kitsData[kitNumber].motivos).reduce((sum, qty) => sum + qty, 0);
            const specialMotivos = kitsData[kitNumber].motivosEspeciales.reduce((sum, motivo) => sum + (motivo.cantidad || 0), 0);
            return regularMotivos + specialMotivos;
        }

        function updateCounters() {
            document.getElementById('totalMotivos').textContent = getTotalMotivos();
            document.getElementById('totalColores').textContent = kitsData[currentKit].colores.length;
        }

        function updateOrderSummary() {
            const container = document.getElementById('orderSummary');
            container.innerHTML = '<h3 style="color: #E50695; text-align: center; margin-bottom: 20px;">üìã Resumen del Pedido</h3>';

            for (let i = 1; i <= totalKits; i++) {
                const kitData = kitsData[i];
                const totalMotivos = getTotalMotivosForKit(i);
                
                let motivosHTML = '';
                Object.keys(kitData.motivos).forEach(motivo => {
                    if (kitData.motivos[motivo] > 0) {
                        motivosHTML += `${motivo} (${kitData.motivos[motivo]}), `;
                    }
                });
                
                kitData.motivosEspeciales.forEach(motivo => {
                    if (motivo.nombre.trim() && motivo.cantidad > 0) {
                        motivosHTML += `‚≠ê${motivo.nombre} (${motivo.cantidad}), `;
                    }
                });
                
                let coloresHTML = '';
                kitData.colores.forEach(colorIndex => {
                    coloresHTML += `${colores[colorIndex].emoji}${colores[colorIndex].name}, `;
                });
                
                container.innerHTML += `
                    <div style="background: rgba(229, 6, 149, 0.1); border-radius: 10px; padding: 15px; margin-bottom: 15px;">
                        <h4 style="color: #E50695;">üé® Kit ${i}</h4>
                        <p><strong>Motivos (${totalMotivos}/30):</strong> ${motivosHTML.slice(0, -2)}</p>
                        <p><strong>Colores (${kitData.colores.length}/6):</strong> ${coloresHTML.slice(0, -2)}</p>
                    </div>
                `;
            }

            const kitsTotal = totalKits * KIT_PRICE;
            const total = kitsTotal + SHIPPING_PRICE;
            
            container.innerHTML += `
                <div style="border-top: 2px solid #E50695; padding-top: 15px; margin-top: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>${totalKits} Kit${totalKits > 1 ? 's' : ''}:</span>
                        <span style="color: #E50695; font-weight: bold;">${kitsTotal.toLocaleString()}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>Domicilio:</span>
                        <span style="color: #E50695; font-weight: bold;">${SHIPPING_PRICE.toLocaleString()}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 1.2em; font-weight: bold;">
                        <span>Total:</span>
                        <span style="color: #E50695;">${total.toLocaleString()}</span>
                    </div>
                </div>
            `;
        }

        function updatePaymentAmount() {
            const total = (totalKits * KIT_PRICE) + SHIPPING_PRICE;
            document.getElementById('paymentAmount').textContent = `üí∞ ${total.toLocaleString()}`;
        }

        function validateRequiredFields() {
            const nombre = document.getElementById('nombreCompleto').value.trim();
            const telefono = document.getElementById('telefono').value.trim();
            const direccion = document.getElementById('direccion').value.trim();
            const ciudad = document.getElementById('ciudad').value.trim();
            
            const isComplete = nombre && telefono && direccion && ciudad;
            
            // Habilitar/deshabilitar bot√≥n de WhatsApp
            const whatsappBtn = document.getElementById('whatsappButton');
            if (whatsappBtn) {
                if (isComplete) {
                    whatsappBtn.disabled = false;
                    whatsappBtn.textContent = 'üì± Enviar Pedido por WhatsApp';
                    whatsappBtn.classList.remove('disabled');
                } else {
                    whatsappBtn.disabled = true;
                    whatsappBtn.textContent = '‚è≥ Completa tu informaci√≥n de env√≠o';
                    whatsappBtn.classList.add('disabled');
                }
            }
            
            return isComplete;
        }

        function showAlert(message, type) {
            const alertsContainer = document.getElementById('alerts');
            alertsContainer.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
            setTimeout(() => alertsContainer.innerHTML = '', 3000);
        }

        function enviarWhatsApp() {
            if (!validateRequiredFields()) {
                showAlert('‚ùå Completa todos los campos obligatorios', 'danger');
                return;
            }

            const nombre = document.getElementById('nombreCompleto').value.trim();
            const telefono = document.getElementById('telefono').value.trim();
            const direccion = document.getElementById('direccion').value.trim();
            const unidad = document.getElementById('unidad').value.trim();
            const ciudad = document.getElementById('ciudad').value.trim();

            let mensaje = "üé® *PEDIDO KOKITO STAR* üé®\n\n";
            mensaje += `üì¶ *${totalKits} Kit${totalKits > 1 ? 's' : ''}*\n\n`;
            
            for (let i = 1; i <= totalKits; i++) {
                const kitData = kitsData[i];
                mensaje += `üé® *KIT ${i}:*\n`;
                
                // Motivos regulares
                Object.keys(kitData.motivos).forEach(motivo => {
                    if (kitData.motivos[motivo] > 0) {
                        mensaje += `‚Ä¢ ${motivo}: ${kitData.motivos[motivo]}\n`;
                    }
                });
                
                // Motivos especiales
                kitData.motivosEspeciales.forEach(motivo => {
                    if (motivo.nombre.trim() && motivo.cantidad > 0) {
                        mensaje += `‚Ä¢ ‚≠ê ${motivo.nombre}: ${motivo.cantidad}\n`;
                    }
                });
                
                mensaje += "\nüåà *Colores:*\n";
                kitData.colores.forEach(index => {
                    mensaje += `${colores[index].emoji} ${colores[index].name}\n`;
                });
                mensaje += "\n";
            }
            
            const kitsTotal = totalKits * KIT_PRICE;
            const total = kitsTotal + SHIPPING_PRICE;
            
            mensaje += "üí∞ *TOTAL:*\n";
            mensaje += `‚Ä¢ Kits: ${kitsTotal.toLocaleString()}\n`;
            mensaje += `‚Ä¢ Domicilio: ${SHIPPING_PRICE.toLocaleString()}\n`;
            mensaje += `‚Ä¢ *Total: ${total.toLocaleString()}*\n\n`;
            
            mensaje += "üì¶ *ENV√çO:*\n";
            mensaje += `ü§© ${nombre}\n`;
            mensaje += `‚òéÔ∏è ${telefono}\n`;
            mensaje += `üì™ ${direccion}\n`;
            if (unidad) mensaje += `üè¢ ${unidad}\n`;
            mensaje += `üåá ${ciudad}\n\n`;
            mensaje += "¬°Gracias! ‚ú®";

            const url = `https://wa.me/573052661533?text=${encodeURIComponent(mensaje)}`;
            window.open(url, '_blank');
            showAlert('‚úÖ Pedido enviado!', 'success');
        }

        // INICIALIZACI√ìN
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            
            document.getElementById('decreaseKitsBtn').addEventListener('click', () => changeKitQuantity(-1));
            document.getElementById('increaseKitsBtn').addEventListener('click', () => changeKitQuantity(1));
            document.getElementById('confirmQuantityBtn').addEventListener('click', confirmKitQuantity);
            document.getElementById('nextKitBtn').addEventListener('click', goToNextKit);
            
            // Validaci√≥n en tiempo real del formulario
            ['nombreCompleto', 'telefono', 'direccion', 'ciudad'].forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('input', function() {
                        const isComplete = validateRequiredFields();
                        if (isComplete) {
                            showAlert('‚úÖ ¬°Informaci√≥n completa! Ya puedes enviar tu pedido', 'success');
                        }
                    });
                }
            });
            
            // Validaci√≥n inicial del bot√≥n
            validateRequiredFields();
        });
    </script>
</body>
</html>
